<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    <title>AuctionEase - Experience Premium Bidding</title>

    <!-- Favicon -->
    <link rel="icon" href="/logo.png" type="image/png" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Inter Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- AOS -->
    <link
      href="https://unpkg.com/aos@2.3.1/dist/aos.css"
      rel="stylesheet"
    />

    <!-- ðŸŒŸ Global Styles -->
    <style>
      html, body {
        margin: 0;
        padding: 0;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        background: radial-gradient(ellipse at top, #0b0b0b 0%, #111 100%);
        color: #eaeaea;
        scroll-behavior: smooth;
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        min-height: 100vh;
        transition: background 0.4s ease;
      }

      a {
        text-decoration: none;
        color: inherit;
        transition: color 0.2s ease;
      }
      a:hover { color: #03c988; }

      ::selection {
        background: #03c988;
        color: #000;
      }

      .container { padding-top: 100px; padding-bottom: 60px; }

      /* ðŸŒŸ Loader Styles */
      #loader {
        position: fixed;
        inset: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        backdrop-filter: blur(18px);
        background: rgba(15, 15, 15, 0.55);
        z-index: 2000;
        transition: opacity 0.4s ease, visibility 0.4s ease;
      }

      #loader.hidden {
        opacity: 0;
        visibility: hidden;
      }

      .loader-card {
        background: rgba(255, 255, 255, 0.15);
        border-radius: 1.5rem;
        padding: 2rem 3rem;
        text-align: center;
        color: #fff;
        box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(20px);
      }

      .spinner {
        width: 60px;
        height: 60px;
        border: 5px solid rgba(255,255,255,0.2);
        border-top: 5px solid #03c988;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto;
      }

      @keyframes spin { to { transform: rotate(360deg); } }
    </style>
  </head>

  <body>
    <!-- ðŸ”” Flash (fixed-position; must be near top of body) -->
    <%- include("../includes/flash") %>

    <!-- ðŸŒŸ Loader (only if not login/register) -->
    <% if (!hideNavbar) { %>
      <div id="loader">
        <div class="loader-card">
          <div class="spinner"></div>
          <h5 class="mt-3">Loading, please wait...</h5>
        </div>
      </div>
    <% } %>

    <!-- âœ… Navbar (only if not login/register) -->
    <% if (!hideNavbar) { %>
      <%- include("../includes/navbar") %>
    <% } %>

    <!-- Page Content -->
    <main class="container">
      <%- body %>
    </main>

    <!-- Footer -->
    <%- include("../includes/footer") %>

    <!-- Scripts -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    ></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init({
        once: true,
        duration: 800,
        easing: 'ease-in-out',
      });

      // Loader hide after load
      const loader = document.getElementById("loader");
      if (loader) {
        window.addEventListener("load", () => {
          loader.classList.add("hidden");
        });

        // Show loader on link clicks (avoid for # / js: and same-page hash)
        document.querySelectorAll("a[href]").forEach(link => {
          link.addEventListener("click", (e) => {
            const href = link.getAttribute("href");
            if (!href) return;
            const isHash = href.startsWith("#");
            const isJs = href.startsWith("javascript:");
            const isExternal = /^(https?:)?\/\//i.test(href);
            if (!isHash && !isJs && !isExternal) {
              loader.classList.remove("hidden");
            }
          });
        });
      }
    </script>
  </body>
</html>
